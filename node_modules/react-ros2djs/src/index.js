import React, { Component } from 'react';
import ROSLIB from 'roslib';
import ROS2D from './vendor/ros2d.min.js';
// import easeljs from 'easeljs';

class Ros2d extends Component {

  componentDidMount() {

    // Connect to ROS
    const ros = new ROSLIB.Ros({
      url: 'ws://localhost:9090'
    });

    const viewer = new ROS2D.Viewer({
      divID: 'test',
      width: 400,
      height: 300
    });

    // Map client
    const gridClient = new ROS2d.OccupancyGridClient({
      ros,
      rootObject: viewer.scene
    });

    gridClient.on('change', () => {
      viewer.scaleToDimensions(gridClient.currentGrid.width, gridClient.currentGrid.height);
      viewer.shift(gridClient.currentGrid.pose.position.x, gridClient.currentGrid.pose.position.y);
    });

  }

  render () {
    return <div id="map"></div>
  }
}

export default Ros2d;
